{"version":3,"file":"FmoneTree.vue.js","sources":["../../../../../src/components/FmoneTree/FmoneTree.vue"],"sourcesContent":["<template>\r\n  <div class=\"fmcoe-tree tree-expand\" ref=\"fmoneTree\">\r\n    <transition name=\"el-fade-in\">\r\n      <div class=\"fmcoe-tree-show\" v-show=\"showtree\">\r\n        <div class=\"rightsvg\" @click=\"collapsetree\">\r\n          <svg-icon class=\"sub-select-icon\" icon-name=\"icon-shousuojiantouzuo\" color=\"#A0A0A0\" />\r\n        </div>\r\n        <div class=\"tree-header\">\r\n          <span class=\"titlestyle\">{{ title }}</span>\r\n          <svg-icon\r\n            class=\"sub-select-icon\"\r\n            @click=\"headerbutton\"\r\n            v-has-permission=\"[savePermission]\"\r\n            size=\"17px\"\r\n            :icon-name=\"iconname\"\r\n            color=\"#A0A0A0\"\r\n            v-show=\"titleshow\"\r\n          />\r\n        </div>\r\n        <div class=\"sub-title\" v-if=\"$slots.subTitle\">\r\n          <slot name=\"subTitle\"></slot>\r\n        </div>\r\n        <slot name=\"treeSearch\" v-if=\"onSearch\">\r\n          <el-input\r\n            v-if=\"onSearch\"\r\n            v-model=\"filterInput\"\r\n            class=\"fmone-tree-search\"\r\n            :placeholder=\"$t('common.placeholder.search')\"\r\n            @input=\"inputchange\"\r\n          >\r\n            <template #prefix>\r\n              <svg-icon class=\"sub-select-icon\" icon-name=\"icon-sousuo\" color=\"#A0A0A0\" />\r\n            </template>\r\n          </el-input>\r\n        </slot>\r\n\r\n        <div class=\"scroll-content\">\r\n          <!--<el-scrollbar>-->\r\n          <el-tree\r\n            ref=\"eltree\"\r\n            :data=\"datalist\"\r\n            :props=\"defaultProps\"\r\n            :node-key=\"nodekey\"\r\n            :highlight-current=\"highlight\"\r\n            :expand-on-click-node=\"false\"\r\n            :filter-node-method=\"filterNode\"\r\n            :current-node-key=\"currentNodeKey\"\r\n            :default-expanded-keys=\"expandedKeys\"\r\n            :draggable=\"draggable\"\r\n            :allow-drag=\"allowDrag\"\r\n            :allow-drop=\"allowDrop\"\r\n            @node-click=\"handleNodeClick\"\r\n            @node-expand=\"handleNodeExpand\"\r\n            @node-collapse=\"handleNodeCollapse\"\r\n            @node-drop=\"handleDrop\"\r\n            style=\"flex: 1\"\r\n          >\r\n            <template #default=\"{ node }\">\r\n              <span class=\"custom-tree-node\">\r\n                <span class=\"text-ellipsis\" :title=\"node.label\" style=\"width: calc(100% - 48px)\">\r\n                  <slot name=\"label\" :node=\"node\">{{ node.label === 'All' ? $t(node.label) : node.label }}</slot>\r\n                </span>\r\n                <span\r\n                  v-if=\"\r\n                    ((currentNodeData[nodekey] && currentNodeData[nodekey] === node.data[nodekey]) ||\r\n                      (currentNode.data && node.data.id === currentNode.data.id && node.level === currentNode.level)) &&\r\n                    menuList.length > 0 &&\r\n                    preset &&\r\n                    leastOne\r\n                  \"\r\n                  v-has-permission=\"[savePermission, deletePermission]\"\r\n                  style=\"margin: 0 18px; width: 12px\"\r\n                >\r\n                  <el-dropdown style=\"line-height: 40px; display: inline-block\" @command=\"handleCommand\">\r\n                    <el-link>\r\n                      <svg-icon class=\"sub-select-icon\" icon-name=\"icon-shufenleicaozuo\" color=\"#A0A0A0\" />\r\n                    </el-link>\r\n                    <template #dropdown>\r\n                      <el-dropdown-menu class=\"dropdownmeunstyle\">\r\n                        <!-- 展示tree右测...的按钮 -->\r\n                        <template v-for=\"(item, index) in menuList\" :key=\"item.clickname\">\r\n                          <el-dropdown-item\r\n                            :command=\"item.clickname\"\r\n                          >\r\n                            {{ item.name }}\r\n                          </el-dropdown-item>\r\n                        </template>\r\n                      </el-dropdown-menu>\r\n                    </template>\r\n                  </el-dropdown>\r\n                </span>\r\n              </span>\r\n            </template>\r\n          </el-tree>\r\n          <!--</el-scrollbar>-->\r\n        </div>\r\n      </div>\r\n    </transition>\r\n\r\n    <transition name=\"el-fade-in\">\r\n      <div class=\"collapse\" v-show=\"!showtree\" @click=\"collapsetree\">\r\n        <svg-icon class=\"sub-select-icon\" icon-name=\"icon-shuangjiantouyou\" color=\"#A0A0A0\" />\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref } from 'vue';\r\nimport defaultProps from './defaults';\r\nexport default defineComponent({\r\n  name: 'FmoneTree',\r\n\r\n  components: {},\r\n\r\n  props: defaultProps,\r\n\r\n  setup(props, { emit, expose }) {\r\n    const fmoneTree = ref();\r\n    const eltree = ref();\r\n    const filterInput = ref(''); //查询数据\r\n    const defaultPropLabel = ref(''); // 默认prop限制字段\r\n    defaultPropLabel.value = props.defaultProps.label;\r\n    // 是否是内置\r\n    const preset = ref(false);\r\n    // 当前层级操作按钮\r\n    const menuList = computed(() => {\r\n      return props.menulist;\r\n    });\r\n    // 输入框输入\r\n    const inputchange = (val) => {\r\n      eltree.value.filter(val);\r\n    };\r\n\r\n    watch(\r\n      () => props.datalist,\r\n      async (val) => {\r\n        if (filterInput.value !== '') {\r\n          await nextTick();\r\n          inputchange(filterInput.value);\r\n        }\r\n      },\r\n      {\r\n        immediate: true,\r\n      },\r\n    );\r\n\r\n    // 过滤树值\r\n    const filterNode = (value, data) => {\r\n      if (!value) return true;\r\n      return data[defaultPropLabel.value].includes(value);\r\n    };\r\n    // 点击后获取到的当前选中节点数据\r\n    const currentNodeData = ref({});\r\n    // 当前选中节点\r\n    const currentNode = ref({});\r\n    // 节点点击\r\n    const handleNodeClick = (data, node) => {\r\n      currentNodeData.value = data;\r\n      currentNode.value = node;\r\n      // 默认数据不可编辑修改\r\n      if (!props.specialKey) {\r\n        preset.value = true;\r\n      } else {\r\n        let normalMenu = menuList.value.filter((item) => {\r\n          return !item.special || (props.specialKey && !currentNodeData.value[props.specialKey]);\r\n        });\r\n        preset.value = normalMenu.length > 0;\r\n      }\r\n\r\n      emit('node-click', data, node);\r\n    };\r\n    // 点击头部按钮加号\r\n    const headerbutton = () => {\r\n      // 清空高亮选中\r\n      eltree.value.setCurrentKey(null);\r\n      currentNodeData.value = {};\r\n      currentNode.value = {};\r\n      emit('headerbutton');\r\n    };\r\n    // 点击tree按钮之后触发的按钮信息\r\n    const handleCommand = (data) => {\r\n      emit(data, currentNodeData.value);\r\n    };\r\n    // 收起展开树\r\n    const showtree = ref(true);\r\n    const collapsetree = () => {\r\n      if (fmoneTree.value.classList.contains('tree-expand')) {\r\n        fmoneTree.value.classList.remove('tree-expand');\r\n        fmoneTree.value.classList.add('tree-collapse');\r\n      } else {\r\n        fmoneTree.value.classList.remove('tree-collapse');\r\n        fmoneTree.value.classList.add('tree-expand');\r\n      }\r\n\r\n      showtree.value = !showtree.value;\r\n      emit('showtreeClick', showtree.value);\r\n    };\r\n\r\n    const setCurrentKey = (key, node) => {\r\n      eltree.value.setCurrentKey(key);\r\n      if (node) {\r\n        currentNodeData.value = node.data;\r\n        currentNode.value = node;\r\n        // 默认数据不可编辑修改\r\n        if (!props.specialKey) {\r\n          preset.value = true;\r\n        } else {\r\n          let normalMenu = menuList.value.filter((item) => {\r\n            return !item.special || (props.specialKey && !currentNodeData.value[props.specialKey]);\r\n          });\r\n          preset.value = normalMenu.length > 0;\r\n        }\r\n      }\r\n    };\r\n\r\n    const removeSelectNode = () => {\r\n      eltree.value.setCurrentKey();\r\n      currentNodeData.value = {};\r\n      currentNode.value = {};\r\n    };\r\n\r\n    const expandedKeys = ref([]);\r\n    const setExpandedKeys = (key) => {\r\n      if (!(expandedKeys.value).includes(key)) {\r\n        (expandedKeys.value).push(key);\r\n      }\r\n    };\r\n\r\n    // 节点被展开时触发的事件\r\n    const handleNodeExpand = (data) => {\r\n      (expandedKeys.value).push(data.nodeKey);\r\n    };\r\n\r\n    // 节点被关闭时触发的事件\r\n    const handleNodeCollapse = (_data, node) => {\r\n      recursiveNode(node);\r\n    };\r\n\r\n    // 递归遍历当前节点\r\n    const recursiveNode = (node) => {\r\n      var index = (expandedKeys.value).indexOf(node.data.nodeKey);\r\n      if (index != -1) {\r\n        expandedKeys.value.splice(index, 1);\r\n      }\r\n      node.childNodes.forEach((childNode) => {\r\n        recursiveNode(childNode);\r\n      });\r\n    };\r\n\r\n    const getCurrentNode = () => {\r\n      return eltree.value.getCurrentNode();\r\n    };\r\n    const getCurrentKey = () => {\r\n      return eltree.value.getCurrentKey();\r\n    };\r\n    const getNode = (key) => {\r\n      return eltree.value.getNode(key);\r\n    };\r\n\r\n    const allowDrop = (draggingNode, dropNodee, type) => {\r\n      if (!props.internalTree) {\r\n        // 单节点只允许拖动排序\r\n        if (props.signLevelTree && type === 'inner') {\r\n          return false;\r\n        }\r\n        /*\r\n        双节点并且目标节点是二级并且是inner操作;\r\n        双节点并且目标节点是一级并且拖动节点有子节点并且是inner操作;\r\n        双节点并且目标节点是二级并且拖动节点有子节点并且不是inner操作;\r\n        以上情况不允许拖动\r\n        */\r\n        if (\r\n          (props.doubleLevelTree && dropNode.level === 2 && type == 'inner') ||\r\n          (props.doubleLevelTree && dropNode.level === 1 && draggingNode.childNodes.length != 0 && type == 'inner') ||\r\n          (props.doubleLevelTree && draggingNode.childNodes.length != 0 && dropNode.level === 2 && type != 'inner')\r\n        ) {\r\n          return false;\r\n        }\r\n\r\n        /*\r\n        相同节点内拖动\r\n        判断一：拖动节点和目标节点层级不一致\r\n        判断二：拖动节点和目标节点层级一致且(拖动节点和目标节点的父节点不是同一个||是inner操作)\r\n        那么不允许拖动\r\n        */\r\n        if (\r\n          props.sameLevelTree &&\r\n          (draggingNode.level !== dropNode.level ||\r\n            (draggingNode.level === dropNode.level && (draggingNode.parent.data.id !== dropNode.parent.data.id || type == 'inner')))\r\n        ) {\r\n          return false;\r\n        }\r\n\r\n        /*\r\n        双层节点，以及只允许同级排序，二级允许再不同一级内拖动排序\r\n        判断一：拖动节点和目标节点层级不一致\r\n        判断二：拖动节点和目标节点层级一致且(拖动节点和目标节点的父节点不是同一个||是inner操作)\r\n        那么不允许拖动\r\n        */\r\n        if (\r\n          props.doubleSameLevelTree &&\r\n          (draggingNode.level !== dropNode.level || (draggingNode.level === dropNode.level && type === 'inner'))\r\n        ) {\r\n          return false;\r\n        }\r\n        // 如果时内置节点，不允许任何关于拖拽的操作\r\n        if (draggingNode.data.preset || dropNode.data.preset) {\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      } else {\r\n        // 如果是内置节点树\r\n        if (\r\n          (draggingNode.parent.data[props.nodekey] === dropNode.data[props.nodekey] && type === 'inner') ||\r\n          (draggingNode.parent.data[props.nodekey] === dropNode.parent.data[props.nodekey] && type !== 'inner')\r\n        ) {\r\n          // 无法单纯通过节点以及type之间的关系进行完全阻止\r\n          if (draggingNode.level > dropNode.level) {\r\n            return false;\r\n          }\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n    };\r\n    const allowDrag = (draggingNode) => {\r\n      if (!props.internalTree) {\r\n        return true;\r\n      } else {\r\n        if (draggingNode.level === 1) {\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n    };\r\n    const action = {\r\n      before: 'moveBefore',\r\n      after: 'moveAfter',\r\n      inner: 'appendChild',\r\n    };\r\n    const handleDrop = (draggingNode, dropNode, dropType) => {\r\n      console.log(draggingNode, dropNode);\r\n      // 当时inner操作时，父级节点必须，最后一个子节点不一定存在\r\n      if (dropType === 'inner') {\r\n        const parentNode = dropNode;\r\n        let targetNode = null;\r\n        if (parentNode.childNodes && parentNode.childNodes.length > 1) {\r\n          targetNode = parentNode.childNodes[parentNode.childNodes.length - 2];\r\n        }\r\n        console.log(targetNode, parentNode);\r\n        emit('drop-end', draggingNode, targetNode, action[dropType], parentNode);\r\n      } else {\r\n        emit('drop-end', draggingNode, dropNode, action[dropType]);\r\n      }\r\n    };\r\n\r\n    expose({\r\n      inputchange,\r\n      setCurrentKey,\r\n      setExpandedKeys,\r\n      getCurrentNode,\r\n      getCurrentKey,\r\n      getNode,\r\n      removeSelectNode,\r\n      handleNodeClick,\r\n    });\r\n\r\n    const hasPermission = (permission) => {\r\n      //获取这个客户的所有的权限信息\r\n      if (permission && permission.length > 0) {\r\n        const permissionFlag = permission; //传过来的值\r\n\r\n        if (permissions.includes('*:*:*')) {\r\n          return true;\r\n        }\r\n\r\n        // 判断\r\n        return permissions.some((permission) => {\r\n          return permissionFlag.includes(permission);\r\n        });\r\n      }\r\n    };\r\n\r\n    // 至少有一条数据才展示...\r\n    const leastOne = computed(() => {\r\n      let showOptList = menuList.value.filter((item) => {\r\n        return (\r\n          hasPermission([item.haspermissionkey]) &&\r\n          ((!props.specialKey && props.maxLevel === Infinity) ||\r\n            !item.special ||\r\n            (props.specialKey && !currentNodeData.value[props.specialKey]) ||\r\n            (item.special && props.maxLevel !== Infinity && (currentNode.value).level < props.maxLevel)) &&\r\n          (!props.internalTree ||\r\n            (props.internalTree && item.topLevelOpt && (currentNode.value).level === 1) ||\r\n            (props.internalTree && item.nextLevelOpt && (currentNode.value).level > 1)) &&\r\n          (!props.doubleLevelTree ||\r\n            (props.doubleLevelTree && item.topLevelOpt && (currentNode.value).level === 1) ||\r\n            (props.doubleLevelTree && item.nextLevelOpt && (currentNode.value).level > 1))\r\n        );\r\n      });\r\n      if (showOptList.length === 0) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n\r\n    return {\r\n      fmoneTree,\r\n      eltree,\r\n      currentNodeData,\r\n      currentNode,\r\n      preset,\r\n      menuList,\r\n      defaultPropLabel,\r\n      filterInput,\r\n      showtree,\r\n      expandedKeys,\r\n      headerbutton,\r\n      inputchange,\r\n      filterNode,\r\n      handleNodeClick,\r\n      handleCommand,\r\n      collapsetree,\r\n      handleNodeExpand,\r\n      handleNodeCollapse,\r\n      allowDrop,\r\n      allowDrag,\r\n      handleDrop,\r\n      leastOne,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style lang=\"less\">\r\n.fmcoe-tree {\r\n  display: inline-block;\r\n  // padding: 36px 32px;\r\n  .fmcoe-tree-show {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 21vw;\r\n    position: relative;\r\n    height: calc(100vh - var(--header-height) - 20px);\r\n    padding: 36px 32px;\r\n    background-color: var(--coe-content-bg-color);\r\n    border-radius: 21px;\r\n    .titlestyle {\r\n      line-height: 1;\r\n      font-size: 24px;\r\n      font-family: OPPOSans-B;\r\n      font-weight: 500;\r\n      color: var(--text-level-one);\r\n    }\r\n    .el-input {\r\n      height: 40px;\r\n      margin-bottom: 26px;\r\n    }\r\n    .el-input__wrapper {\r\n      border-radius: 17px;\r\n    }\r\n    .fmone-tree-search + .scroll-content {\r\n      height: calc(100% - 65px - 58px);\r\n    }\r\n    .scroll-content {\r\n      flex: 1;\r\n      display: flex;\r\n      overflow: auto;\r\n      height: calc(100% - 65px);\r\n    }\r\n    .el-tree {\r\n      //overflow: auto;\r\n      .el-tree-node__content {\r\n        //display: inline-block;\r\n        margin-bottom: 8px;\r\n        height: 40px;\r\n        line-height: 40px;\r\n        width: 100%;\r\n        border-radius: 20px;\r\n      }\r\n    }\r\n  }\r\n  .tree-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 34px;\r\n  }\r\n  &:hover {\r\n    .rightsvg {\r\n      display: inline-block;\r\n    }\r\n  }\r\n  .sub-title{\r\n    margin:  -10px 0 14px;\r\n  }\r\n}\r\n.custom-tree-node {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  width: calc(100% - 36px)\r\n  //vertical-align: middle;\r\n}\r\n.rightsvg {\r\n  width: 24px;\r\n  height: 72px;\r\n  position: absolute;\r\n  right: -12px;\r\n  top: 145px;\r\n  display: none;\r\n  line-height: 72px;\r\n  text-align: center;\r\n  background-color: var(--content-bg-color);\r\n  border: 1px solid var(--bg-color);\r\n  cursor: pointer;\r\n  box-shadow: 0px 1px 14px 0px rgba(179, 179, 179, 0.18);\r\n  border-radius: 12px;\r\n}\r\n.collapse {\r\n  width: 66px;\r\n  height: 66px;\r\n  text-align: center;\r\n  background-color: var(--coe-content-bg-color);\r\n  display: inline-block;\r\n  cursor: pointer;\r\n  line-height: 66px;\r\n  border-radius: 50% !important;\r\n}\r\n.el-dropdown-menu__item {\r\n  height: 40px;\r\n}\r\n.el-dropdown-menu__item:not(.is-disabled):focus {\r\n  border-radius: 20px !important;\r\n  background: #f2f2f2 !important;\r\n  color: var(--text-level-one);\r\n}\r\n.dropdownmeunstyle {\r\n  background: #ffffff;\r\n  box-shadow: 0px 0px 10px 0px rgba(179, 179, 179, 0.3);\r\n  border-radius: 14px;\r\n  padding: 12px 11px;\r\n  min-width: 140px;\r\n}\r\n.el-popper__arrow {\r\n  display: none;\r\n}\r\n\r\n.fmone-tree-search{\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 26px;\r\n  background-color: var(--el-fill-color-light);\r\n  border-radius: 20px;\r\n  &.more-search:after{\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    display: block;\r\n    width: 1px;\r\n    height: 18px;\r\n    background-color: var(--el-tree-active);\r\n    transform: translate(-50%, -50%);\r\n  }\r\n  >*{\r\n    flex: 1;\r\n  }\r\n  .el-input{\r\n    margin-bottom: 0 !important;\r\n  }\r\n  .el-input__wrapper{\r\n    box-shadow: none !important;\r\n    background-color: var(--el-fill-color-light);\r\n  }\r\n}\r\n</style>\r\n"],"names":["_sfc_main","defineComponent","defaultProps","props","emit","expose","fmoneTree","ref","eltree","filterInput","defaultPropLabel","preset","menuList","computed","inputchange","val","watch","nextTick","filterNode","value","data","currentNodeData","currentNode","handleNodeClick","node","normalMenu","item","headerbutton","handleCommand","showtree","collapsetree","setCurrentKey","key","removeSelectNode","expandedKeys","setExpandedKeys","handleNodeExpand","handleNodeCollapse","_data","recursiveNode","index","childNode","getCurrentNode","getCurrentKey","getNode","allowDrop","draggingNode","dropNodee","type","allowDrag","action","handleDrop","dropNode","dropType","parentNode","targetNode","hasPermission","permission","permissionFlag","leastOne","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_6","_hoisted_7","_hoisted_8","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_Transition","_withCtx","_withDirectives","_createElementVNode","_ctx","args","_component_svg_icon","_toDisplayString","_hoisted_5","_renderSlot","_createCommentVNode","_createBlock","_component_el_input","_cache","$event","_component_el_tree","_createTextVNode","_hoisted_9","_component_el_dropdown","_component_el_dropdown_menu","_Fragment","_renderList","_component_el_dropdown_item","_component_el_link","_directive_has_permission"],"mappings":"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"}